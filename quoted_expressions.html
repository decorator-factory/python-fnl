<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quoted expressions</title>
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <main>
        <div class="-title">
            <h1>Quoted expressions</h1>
            <a href="index.html">Go to the index</a>
        </div>
        <div class="-mount">
            <h2>Strict evaluation</h2><p>Suppose that you want to render some content conditionally. For example, you might want to add notes that are only visible to the editors; or you might want to temporarily disable some part of the tree. It&#x27;s not very hard to implement, right?</p><pre>
extensions = {}

is_debug = True

@fn(extensions, &#x27;if-debug&#x27;)
def if_debug():
    def _if_debug(subtree):
        if is_debug:
            return subtree
        else:
            return e.BlockConcat(())
    yield (&#x27;(位 inline|block . block)&#x27;, _if_debug)

</pre><p>Let&#x27;s see if it works.</p><pre>
&gt;&gt;&gt; is_debug = True
&gt;&gt;&gt; fnl.html(&#x27;(if-debug (bf &quot;hi&quot;))&#x27;, extensions)
&#x27;&lt;b&gt;hi&lt;/b&gt;&#x27;
&gt;&gt;&gt; is_debug = False
&gt;&gt;&gt; fnl.html(&#x27;(if-debug (bf &quot;hi&quot;))&#x27;, extensions)
&#x27;&#x27;

</pre><p>It works, but there are some issues. The subtree is evaluated even if it doesn&#x27;t get rendered. It might waste some resources if it&#x27;s a really large tree (or if it requies reading from a file, which is probably not a good idea, but you might want to read a config, for instance). More importantly, under certain conditions, it might throw an error because something about this tree requires <tt>is_debug</tt> to be true.</p><p>FNL is a <i>strict</i> language. It means that function arguments are fully evaluated first, and only then are passed to the function. So, alas, we&#x27;re out of luck.</p><h2>Quoted expression to the rescue</h2><p>...unless we use quoted expressions! A quoted expression represents an expression that doesn&#x27;t get immediately evaluated. You can create a quoted expression by prefixing it with <tt>&amp;</tt>, for example, <tt>&amp;1024</tt> is a deferred integer, and <tt>&amp;(hello&nbsp;&quot;world&quot;)</tt> is a deferred call.</p><pre>
extensions = {}

is_debug = True

@fn(extensions, &#x27;if-debug&#x27;)
def if_debug():
    def _if_debug(quoted):
        if is_debug:
            return quoted.subexpression
        else:
            return e.BlockConcat(())
    yield (&#x27;(位 &amp;[any] . block)&#x27;, _if_debug)

</pre><p><tt>&amp;[any]</tt> is a type of a quoted expession. The type of an expesssion isn&#x27;t known until it&#x27;s fully evaluated, so we will use <tt>any</tt>as the type parameter. Other examples of quoted types: <ul><li><tt>&amp;[str] </tt>&mdash; quoted string (like <tt>&amp;&quot;hi&quot;</tt>)</li><li><tt>&amp;[int] </tt>&mdash; quoted integer (like <tt>&amp;10</tt>)</li><li><tt>&amp;[name] </tt>&mdash; quoted name (like <tt>&amp;a-name</tt>)</li><li><tt>&amp;[name[a|b]] </tt>&mdash; bounded quoted name (only <tt>&amp;a</tt> or <tt>&amp;b</tt> )</li><li><tt>&amp;[(name int)] </tt>&mdash; s-expression (like <tt>&amp;(version 7)</tt>)</li></ul></p><h2>Examples of using quoted expressions in <tt>fnl.x</tt></h2><p><tt>fnl.x</tt> is a standard extension that helps you construct arbitrary HTML.</p><pre>
import fnl

source = ...

print(fnl.html(source, fnl.x))
# or:
print(fnl.html(source, {**your, **extensions, **fnl.x}))
# or, in 3.9+:
print(fnl.html(source, your | extensions | fnl.x))

</pre><p><tt>fnl.x</tt> exports three function: <tt>b</tt>, <tt>i</tt>, <tt>+</tt>. <tt>b</tt> creates a block element, <tt>i</tt> creates an inline element, and <tt>+</tt> is a shortcut for the <tt>div</tt> element.</p><pre><span class="code--fnl--ws">
</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws">
  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--string">&quot;!DOCTYPE&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">html</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">.</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">html</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">lang</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;en&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">head</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">meta</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">charset</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;UTF-8&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">.</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">meta</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">name</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;viewport&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">content</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">.</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">title</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;My blog&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">link</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">rel</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;stylesheet&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">href</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;style.css&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">/</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">body</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">b</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">main</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">#app</span><span class="code--fnl--ws">
        </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">+</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">.greeting</span><span class="code--fnl--ws">
          </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">h</span><span class="code--fnl--ws"> </span><span class="code--fnl--integer">1</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;Hello, world!&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
        </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">+</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">.content</span><span class="code--fnl--ws">
          </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">i</span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--name">a</span><span class="code--fnl--ws"> </span><span class="code--fnl--ampersand">&amp;</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">href</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;pay.html&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;Give me your money&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span>
</pre><p>This is going to render the following HTML code:</p><pre>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;My blog&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;main id=&quot;app&quot;&gt;
      &lt;div class=&quot;greeting&quot;&gt;
        &lt;h1&gt;Hello, world!&lt;/h1&gt;
        &lt;div class=&quot;content&quot;&gt;
          &lt;a href=&quot;pay.html&quot;&gt;Give me your money&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/main&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre><p>As you can see, there aren&#x27;t that many rules:<ul><li>You can use plain old FNL functions (like <tt>h</tt>)</li><li><tt>(b&amp;tag ...)</tt> creates a block element</li><li><tt>(b&quot;tag!?!&amp;&quot; ...)</tt> creates a block element with a name which is not a valid identifier</li><li><tt>(i&amp;tag ...)</tt> creates an inline element</li><li><tt>&amp;.class</tt> adds a class</li><li><tt>&amp;#id</tt> adds an ID</li><li><tt>&amp;html</tt> adds an attribute without an argument</li><li><tt>&amp;(attr &quot;value&quot;)</tt> adds an attribute</li><li><tt>&amp;.</tt> makes the tag closed without making a <tt>&lt;tag&gt;&lt;/tag&gt;</tt> pair</li><li><tt>&amp;/</tt> makes the tag closed without making a <tt>&lt;tag&gt;&lt;/tag&gt;</tt> pair and adds a slash ( / ) at the end.</li></ul></p><p><tt>fnlx</tt> takes advantage of quoted expressions: an expression like <tt>(lang&nbsp;&quot;en&quot;)</tt> or <tt>#id</tt> would fail at runtime.</p><p>With this tool, you can write pretty much any HTML you want. If you&#x27;re feeling adventurous, you can even write markup for Vue.js like that.</p><hr /><h2>Source:</h2><pre><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$docs</span><span class="code--fnl--ws"> </span><span class="code--fnl--name">$filename</span><span class="code--fnl--ws"> </span><span class="code--fnl--name">$source</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;Quoted expressions&quot;</span><span class="code--fnl--ws">
  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">h</span><span class="code--fnl--ws"> </span><span class="code--fnl--integer">2</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;Strict evaluation&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;Suppose that you want to render some content conditionally. For example,
    you might want to add notes that are only visible to the editors; or
    you might want to temporarily disable some part of the tree. It&#x27;s not very
    hard to implement, right?&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--raw-string">&quot;&quot;&quot;
  extensions = {}

  is_debug = True

  @fn(extensions, &#x27;if-debug&#x27;)
  def if_debug():
      def _if_debug(subtree):
          if is_debug:
              return subtree
          else:
              return e.BlockConcat(())
      yield (&#x27;(位 inline|block . block)&#x27;, _if_debug)
  &quot;&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;Let&#x27;s see if it works.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--raw-string">&quot;&quot;&quot;
  &gt;&gt;&gt; is_debug = True
  &gt;&gt;&gt; fnl.html(&#x27;(if-debug (bf &quot;hi&quot;))&#x27;, extensions)
  &#x27;&lt;b&gt;hi&lt;/b&gt;&#x27;
  &gt;&gt;&gt; is_debug = False
  &gt;&gt;&gt; fnl.html(&#x27;(if-debug (bf &quot;hi&quot;))&#x27;, extensions)
  &#x27;&#x27;
  &quot;&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;It works, but there are some issues. The subtree is evaluated
    even if it doesn&#x27;t get rendered. It might waste some resources if it&#x27;s
    a really large tree (or if it requies reading from a file, which is probably
    not a good idea, but you might want to read a config, for instance). More
    importantly, under certain conditions, it might throw an error because
    something about this tree requires &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;is_debug&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; to be true.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;FNL is a &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">it</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;strict&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; language. It means that function arguments are
    fully evaluated first, and only then are passed to the function. So, alas,
    we&#x27;re out of luck.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">h</span><span class="code--fnl--ws"> </span><span class="code--fnl--integer">2</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;Quoted expression to the rescue&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;...unless we use quoted expressions! A quoted expression represents an expression
    that doesn&#x27;t get immediately evaluated. You can create a quoted expression
    by prefixing it with &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;, for example, &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">mono</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;1024&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; is a
    deferred integer, and &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">mono</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;(hello \&quot;world\&quot;)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; is a deferred call.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--raw-string">&quot;&quot;&quot;
  extensions = {}

  is_debug = True

  @fn(extensions, &#x27;if-debug&#x27;)
  def if_debug():
      def _if_debug(quoted):
          if is_debug:
              return quoted.subexpression
          else:
              return e.BlockConcat(())
      yield (&#x27;(位 &amp;[any] . block)&#x27;, _if_debug)
  &quot;&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">mono</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;[any]&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; is a type of a quoted expession. The type of an expesssion
    isn&#x27;t known until it&#x27;s fully evaluated, so we will use &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;any&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;as the
    type parameter. Other examples of quoted types: &quot;</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">list-unordered</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;[str] &quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">--</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; quoted string (like &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;\&quot;hi\&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;)&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;[int] &quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">--</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; quoted integer (like &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;10&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;)&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;[name] &quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">--</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; quoted name (like &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;a-name&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;)&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;[name[a|b]] &quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">--</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; bounded quoted name (only &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;a&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; or &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;b&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; )&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;[(name int)] &quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">--</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; s-expression (like &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;(version 7)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;)&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">h</span><span class="code--fnl--ws"> </span><span class="code--fnl--integer">2</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;Examples of using quoted expressions in &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;fnl.x&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;fnl.x&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; is a standard extension that helps you construct arbitrary HTML.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--raw-string">&quot;&quot;&quot;
    import fnl

    source = ...

    print(fnl.html(source, fnl.x))
    # or:
    print(fnl.html(source, {**your, **extensions, **fnl.x}))
    # or, in 3.9+:
    print(fnl.html(source, your | extensions | fnl.x))
  &quot;&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;fnl.x&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">  </span><span class="code--fnl--string">&quot; exports three function: &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">sepmap</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;, &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--name">tt</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;b&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;i&quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;+&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;. &quot;</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;b&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; creates a block element, &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;i&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; creates an inline element,
    and &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;+&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; is a shortcut for the &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;div&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; element.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$fnl</span><span class="code--fnl--ws"> </span><span class="code--fnl--raw-string">&quot;&quot;&quot;
  ($
    (b&quot;!DOCTYPE&quot; &amp;html &amp;.)
    (b&amp;html &amp;(lang &quot;en&quot;)
      (b&amp;head
        (b&amp;meta &amp;(charset &quot;UTF-8&quot;) &amp;.)
        (b&amp;meta &amp;(name &quot;viewport&quot;) &amp;(content &quot;width=device-width, initial-scale=1.0&quot;) &amp;.)
        (b&amp;title &quot;My blog&quot;)
        (b&amp;link &amp;(rel &quot;stylesheet&quot;) &amp;(href &quot;style.css&quot;) &amp;/))
      (b&amp;body
        (b&amp;main &amp;#app
          (+ &amp;.greeting
            ((h 1) &quot;Hello, world!&quot;)
          (+ &amp;.content
            (i&amp;a &amp;(href &quot;pay.html&quot;) &quot;Give me your money&quot;)))))))
  &quot;&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;This is going to render the following HTML code:&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--raw-string">&quot;&quot;&quot;
  &lt;!DOCTYPE html&gt;
  &lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
      &lt;title&gt;My blog&lt;/title&gt;
      &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;main id=&quot;app&quot;&gt;
        &lt;div class=&quot;greeting&quot;&gt;
          &lt;h1&gt;Hello, world!&lt;/h1&gt;
          &lt;div class=&quot;content&quot;&gt;
            &lt;a href=&quot;pay.html&quot;&gt;Give me your money&lt;/a&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/body&gt;
  &lt;/html&gt;&quot;&quot;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;As you can see, there aren&#x27;t that many rules:&quot;</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">list-unordered</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;You can use plain old FNL functions (like &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;h&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;(b&amp;tag ...)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; creates a block element&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;(b\&quot;tag!?!&amp;\&quot; ...)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; creates a block element with a name which is
        not a valid identifier&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;(i&amp;tag ...)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; creates an inline element&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;.class&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; adds a class&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;#id&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; adds an ID&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;html&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; adds an attribute without an argument&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;(attr \&quot;value\&quot;)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; adds an attribute&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; makes the tag closed without making a &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&lt;tag&gt;&lt;/tag&gt;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
        </span><span class="code--fnl--string">&quot; pair&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
      </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&amp;/&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; makes the tag closed without making a &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;&lt;tag&gt;&lt;/tag&gt;&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
        </span><span class="code--fnl--string">&quot; pair and adds a slash ( / ) at the end.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;fnlx&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; takes advantage of quoted expressions: an expression like &quot;</span><span class="code--fnl--ws">
    </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">mono</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;(lang \&quot;en\&quot;)&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; or &quot;</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">tt</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;#id&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot; would fail at runtime.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">p</span><span class="code--fnl--ws">
    </span><span class="code--fnl--string">&quot;With this tool, you can write pretty much any HTML you want. If you&#x27;re
    feeling adventurous, you can even write markup for Vue.js like that.&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">

  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">horizontal-rule</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">h</span><span class="code--fnl--ws"> </span><span class="code--fnl--integer">2</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws"> </span><span class="code--fnl--string">&quot;Source:&quot;</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
  </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">pre</span><span class="code--fnl--ws"> </span><span class="code--fnl--left-paren">(</span><span class="code--fnl--name">$fnl</span><span class="code--fnl--ws"> </span><span class="code--fnl--name">$source</span><span class="code--fnl--rpar">)</span><span class="code--fnl--rpar">)</span><span class="code--fnl--ws">
</span><span class="code--fnl--rpar">)</span>
</pre>
        </div>
    </main>
</body>
</html>